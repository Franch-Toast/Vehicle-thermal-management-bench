# 电动汽车整车热管理台架电控系统开发
## 项目背景

针对课题组的课题`基于R290冷媒热泵的电动汽车整车热管理系统研究`设计了一套的实验台架，该项目用于搭建适配该实验台架的电控系统，以实现实验台架的正常运行和数据采集。

## 项目需求

1. 传感器数据采集；
2. 执行器动作；
3. 采集数据的发送；
4. 部件间的通讯；



## 解决方案

### 硬件设计

主控芯片使用 **国产车规级芯片 云途 `YTM32B1ME0` **。

暂时使用云途公司的评估板 **`YTM32B1ME0 -Q144 评估板`**进行功能的开发。

![评估板](./pic/1.png)

#### 评估板资源

板载资源：

- EVB MCU：YTM32B1ME0-LQFP144 
- EVB 供电：12V/USB-5V 可选
- MCU 供电：5V/3.3V 可选
- 6 通道板载 LED 控制
- 2 通道按键输入 
- 4 通道 CAN 通讯接口 
- 4 通道 LIN 通讯接口 
- 2 通道电位计/模拟量输入 
- 1 个板载 I2C 接口 EEPROM 
- 1 个板载 SPI 接口 FRAM



#### 传感器

##### 流量传感器



##### 水路PT传感器



#### 执行器

##### 水泵







### 软件设计

开发初版使用云途公司提供的配置工具PE进行快速搭建。





#### MCU功能配置

##### 时钟

暂时使用默认时钟配置，外部高速晶振提供三个主时钟频率（CORE_CLK、FAST_CLK、SLOW_CLK）分别为120MHz、120MHz、40MHz。

![时钟配置](./pic/2.png)





##### 串口

串口配置：

|   功能   |  IO   | MCU  Pin  NO. | Direction | Interrupt config | Interrupt Status |
| :------: | :---: | :-----------: | :-------: | :--------------: | :--------------: |
| UART-RXD | PTA_8 |      144      |   Input   |        -         |    Clear flag    |
| UART-TXD | PTA_9 |      143      |  Output   |        -         |        -         |

- 波特率：115200









#### 编译与烧录

使用 VS Code 进行代码编辑，Cmake构建项目，JTAG接口烧录。

在 VS Code 中进行debug。

##### 